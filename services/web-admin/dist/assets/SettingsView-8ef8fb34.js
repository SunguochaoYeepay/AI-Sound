import{u as F}from"./api-d479bee2.js";import{_ as H,d as I,a as M,r as P,o as j,e as y,f as E,c as a,w as t,m as u,g as o,j as z,i,p as B,G as O,t as W}from"./index-827e089e.js";import"./axios-3a665b0f.js";const q=I({name:"SettingsView",setup(){F();const s=M({systemName:"MegaTTS3管理系统",ttsModel:"MegaTTS3-zh-en-v1.0",vramLimit:8,maxTasks:4,audioFormat:"wav",sampleRate:24e3}),e=M({apiKey:"****************************************",allowRemoteAccess:!1,logLevel:"info",cacheDir:"/tmp/megatts3/cache"}),c=P([{id:1,name:"MegaTTS3-zh-en-v1.0",description:"基础中英文双语语音合成模型",installed:!0,downloading:!1},{id:2,name:"MegaTTS3-style-transfer-v2",description:"语音风格迁移模型",installed:!1,downloading:!1},{id:3,name:"MegaTTS3-soundfield-v1",description:"声场处理增强模型",installed:!1,downloading:!1}]),b=async()=>{try{setTimeout(()=>{u.success("设置加载成功")},500)}catch(l){u.error("加载设置失败: "+(l.message||"未知错误"))}},k=async()=>{try{setTimeout(()=>{u.success("基本设置保存成功")},500)}catch(l){u.error("保存失败: "+(l.message||"未知错误"))}},T=()=>{Object.assign(s,{systemName:"MegaTTS3管理系统",ttsModel:"MegaTTS3-zh-en-v1.0",vramLimit:8,maxTasks:4,audioFormat:"wav",sampleRate:24e3}),u.info("已重置为默认设置")},_=async()=>{try{setTimeout(()=>{u.success("高级设置保存成功")},500)}catch(l){u.error("保存失败: "+(l.message||"未知错误"))}},f=()=>{const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";for(let m=0;m<40;m++)r+=l.charAt(Math.floor(Math.random()*l.length));e.apiKey=r,u.success("已生成新的API密钥")},v=async()=>{try{setTimeout(()=>{u.success("缓存清理成功")},800)}catch(l){u.error("清理缓存失败: "+(l.message||"未知错误"))}},g=async l=>{const r=c.value.find(m=>m.id===l.id);if(r){r.downloading=!0;try{setTimeout(()=>{r.installed=!0,r.downloading=!1,u.success(`资源 ${l.name} 下载成功`)},3e3)}catch(m){r.downloading=!1,u.error("下载失败: "+(m.message||"未知错误"))}}},d=async l=>{try{setTimeout(()=>{u.success(`资源 ${l.name} 校验通过`)},1e3)}catch(r){u.error("校验失败: "+(r.message||"未知错误"))}};return j(()=>{b()}),{basicSettings:s,advancedSettings:e,resources:c,saveBasicSettings:k,resetBasicSettings:T,saveAdvancedSettings:_,generateApiKey:f,cleanCache:v,downloadResource:g,checkResource:d}}}),J={class:"settings"};function Q(s,e,c,b,k,T){const _=o("a-card"),f=o("a-col"),v=o("a-row"),g=o("a-input"),d=o("a-form-item"),l=o("a-select-option"),r=o("a-select"),m=o("a-slider"),A=o("a-input-number"),w=o("a-radio"),R=o("a-radio-group"),p=o("a-button"),C=o("a-form"),S=o("a-tab-pane"),U=o("a-input-password"),G=o("a-switch"),L=o("a-avatar"),N=o("a-list-item-meta"),V=o("a-list-item"),$=o("a-list"),K=o("a-tabs");return y(),E("div",J,[a(v,{gutter:16,class:"mb-16"},{default:t(()=>[a(f,{span:24},{default:t(()=>[a(_,{title:"系统设置",bordered:!1},{default:t(()=>e[10]||(e[10]=[z("p",null,"配置系统参数和资源",-1)])),_:1,__:[10]})]),_:1})]),_:1}),a(v,{gutter:16},{default:t(()=>[a(f,{span:24},{default:t(()=>[a(_,null,{default:t(()=>[a(K,{"default-active-key":"1"},{default:t(()=>[a(S,{key:"1",tab:"基本设置"},{default:t(()=>[a(C,{model:s.basicSettings,"label-col":{span:6},"wrapper-col":{span:14}},{default:t(()=>[a(d,{label:"系统名称"},{default:t(()=>[a(g,{value:s.basicSettings.systemName,"onUpdate:value":e[0]||(e[0]=n=>s.basicSettings.systemName=n)},null,8,["value"])]),_:1}),a(d,{label:"TTS引擎模型"},{default:t(()=>[a(r,{value:s.basicSettings.ttsModel,"onUpdate:value":e[1]||(e[1]=n=>s.basicSettings.ttsModel=n)},{default:t(()=>[a(l,{value:"MegaTTS3-zh-en-v1.0"},{default:t(()=>e[11]||(e[11]=[i("MegaTTS3-zh-en-v1.0")])),_:1,__:[11]}),a(l,{value:"MegaTTS3-zh-en-v2.0"},{default:t(()=>e[12]||(e[12]=[i("MegaTTS3-zh-en-v2.0")])),_:1,__:[12]})]),_:1},8,["value"])]),_:1}),a(d,{label:"显存占用限制"},{default:t(()=>[a(m,{value:s.basicSettings.vramLimit,"onUpdate:value":e[2]||(e[2]=n=>s.basicSettings.vramLimit=n),min:1,max:48,marks:{1:"1GB",8:"8GB",16:"16GB",24:"24GB",32:"32GB",48:"48GB"}},null,8,["value"])]),_:1}),a(d,{label:"最大并行任务数"},{default:t(()=>[a(A,{value:s.basicSettings.maxTasks,"onUpdate:value":e[3]||(e[3]=n=>s.basicSettings.maxTasks=n),min:1,max:16},null,8,["value"])]),_:1}),a(d,{label:"音频输出格式"},{default:t(()=>[a(R,{value:s.basicSettings.audioFormat,"onUpdate:value":e[4]||(e[4]=n=>s.basicSettings.audioFormat=n)},{default:t(()=>[a(w,{value:"wav"},{default:t(()=>e[13]||(e[13]=[i("WAV (无损)")])),_:1,__:[13]}),a(w,{value:"mp3"},{default:t(()=>e[14]||(e[14]=[i("MP3 (压缩)")])),_:1,__:[14]})]),_:1},8,["value"])]),_:1}),a(d,{label:"音频采样率"},{default:t(()=>[a(r,{value:s.basicSettings.sampleRate,"onUpdate:value":e[5]||(e[5]=n=>s.basicSettings.sampleRate=n)},{default:t(()=>[a(l,{value:"22050"},{default:t(()=>e[15]||(e[15]=[i("22.05kHz")])),_:1,__:[15]}),a(l,{value:"24000"},{default:t(()=>e[16]||(e[16]=[i("24kHz")])),_:1,__:[16]}),a(l,{value:"44100"},{default:t(()=>e[17]||(e[17]=[i("44.1kHz")])),_:1,__:[17]}),a(l,{value:"48000"},{default:t(()=>e[18]||(e[18]=[i("48kHz")])),_:1,__:[18]})]),_:1},8,["value"])]),_:1}),a(d,{"wrapper-col":{span:14,offset:6}},{default:t(()=>[a(p,{type:"primary",onClick:s.saveBasicSettings},{default:t(()=>e[19]||(e[19]=[i(" 保存设置 ")])),_:1,__:[19]},8,["onClick"]),a(p,{class:"ml-2",onClick:s.resetBasicSettings},{default:t(()=>e[20]||(e[20]=[i(" 重置 ")])),_:1,__:[20]},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),a(S,{key:"2",tab:"高级设置"},{default:t(()=>[a(C,{model:s.advancedSettings,"label-col":{span:6},"wrapper-col":{span:14}},{default:t(()=>[a(d,{label:"API密钥"},{default:t(()=>[a(U,{value:s.advancedSettings.apiKey,"onUpdate:value":e[6]||(e[6]=n=>s.advancedSettings.apiKey=n)},null,8,["value"]),a(p,{size:"small",type:"link",onClick:s.generateApiKey},{default:t(()=>e[21]||(e[21]=[i(" 重新生成 ")])),_:1,__:[21]},8,["onClick"])]),_:1}),a(d,{label:"允许远程访问"},{default:t(()=>[a(G,{checked:s.advancedSettings.allowRemoteAccess,"onUpdate:checked":e[7]||(e[7]=n=>s.advancedSettings.allowRemoteAccess=n)},null,8,["checked"])]),_:1}),a(d,{label:"日志级别"},{default:t(()=>[a(r,{value:s.advancedSettings.logLevel,"onUpdate:value":e[8]||(e[8]=n=>s.advancedSettings.logLevel=n)},{default:t(()=>[a(l,{value:"debug"},{default:t(()=>e[22]||(e[22]=[i("调试")])),_:1,__:[22]}),a(l,{value:"info"},{default:t(()=>e[23]||(e[23]=[i("信息")])),_:1,__:[23]}),a(l,{value:"warning"},{default:t(()=>e[24]||(e[24]=[i("警告")])),_:1,__:[24]}),a(l,{value:"error"},{default:t(()=>e[25]||(e[25]=[i("错误")])),_:1,__:[25]})]),_:1},8,["value"])]),_:1}),a(d,{label:"缓存目录"},{default:t(()=>[a(g,{value:s.advancedSettings.cacheDir,"onUpdate:value":e[9]||(e[9]=n=>s.advancedSettings.cacheDir=n)},null,8,["value"]),a(p,{size:"small",type:"link",onClick:s.cleanCache},{default:t(()=>e[26]||(e[26]=[i(" 清理缓存 ")])),_:1,__:[26]},8,["onClick"])]),_:1}),a(d,{"wrapper-col":{span:14,offset:6}},{default:t(()=>[a(p,{type:"primary",onClick:s.saveAdvancedSettings},{default:t(()=>e[27]||(e[27]=[i(" 保存设置 ")])),_:1,__:[27]},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),a(S,{key:"3",tab:"资源管理"},{default:t(()=>[a($,{"item-layout":"horizontal","data-source":s.resources},{header:t(()=>e[28]||(e[28]=[z("div",null,"模型资源",-1)])),renderItem:t(({item:n})=>[a(V,null,{actions:t(()=>[n.installed?(y(),B(p,{key:1,type:"default",onClick:D=>s.checkResource(n)},{default:t(()=>e[30]||(e[30]=[i(" 校验 ")])),_:2,__:[30]},1032,["onClick"])):(y(),B(p,{key:0,type:"primary",onClick:D=>s.downloadResource(n),loading:n.downloading},{default:t(()=>e[29]||(e[29]=[i(" 下载 ")])),_:2,__:[29]},1032,["onClick","loading"]))]),default:t(()=>[a(N,{title:n.name,description:n.description},{avatar:t(()=>[a(L,{style:O({backgroundColor:n.installed?"#52c41a":"#ff4d4f"})},{default:t(()=>[i(W(n.installed?"已":"缺"),1)]),_:2},1032,["style"])]),_:2},1032,["title","description"])]),_:2},1024)]),_:1},8,["data-source"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const x=H(q,[["render",Q],["__scopeId","data-v-8c44cc08"]]);export{x as default};
